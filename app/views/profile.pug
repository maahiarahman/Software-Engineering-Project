extends layout

block content
  .dashboard-container
    // ğŸŒˆ Sidebar with user info & dynamic data
    aside.sidebar
      .user-info
        img.profile-thumb(src="/img/user-default.png", alt="User Avatar")
        h3 #{user.first_name} #{user.last_name}
        p.email #{user.email}

        // ğŸ”° Badge Icon
        if user.badge === 'Gold'
          div.user-badge
            i.fa-solid.fa-medal.text-yellow-400
            span Gold Member
        else if user.badge === 'Silver'
          div.user-badge
            i.fa-solid.fa-trophy.text-gray-400
            span Silver Member
        else if user.badge === 'Bronze'
          div.user-badge
            i.fa-solid.fa-award.text-orange-400
            span Bronze Member

      // ğŸ“Œ User-Specific Sidebar
      nav
        ul
          li.active: a(href="#dashboard") Dashboard Overview
          if recipes && recipes.length
            li: a(href="#user-recipes") My Recipes (#{recipes.length})
          if reviews && reviews.length
            li: a(href="#user-reviews") My Reviews (#{reviews.length})
          if posts && posts.length
            li: a(href="#user-posts") My Posts (#{posts.length})
          if swaps && swaps.length
            li: a(href="#user-swaps") My Swaps (#{swaps.length})

    // ğŸ§ Main Content
    main.content
      header.profile-header
        .profile-meta
          h2 #{user.first_name} #{user.last_name}
          p Age: #{user.age} | DOB: #{user.date_of_birth.toDateString()}
          p User ID: #{user.user_ID}

        if isAdmin
          .admin-actions
            if !user.isBanned
              form(action=`/user/${user.user_ID}/ban`, method="POST")
                button.ban-btn(type="submit") Ban User
            else
              p.text-red-600.font-bold This user is banned.
            form(action=`/user/${user.user_ID}/delete`, method="POST")
              button.delete-btn(type="submit") Delete User

      // ğŸ“Š Stats Overview
      section#dashboard.metrics
        .card
          h3 Recipes Uploaded
          p #{(recipes || []).length}
        .card
          h3 Reviews Written
          p #{(reviews || []).length}
        .card
          h3 Posts Made
          p #{(posts || []).length}
        .card
          h3 Swap Requests
          p #{(swaps || []).length}

      // ğŸ“‚ Dynamic Sections
      if recipes && recipes.length
        section#user-recipes
          h3 User Recipes
          each recipe in recipes
            p= recipe.title

      if reviews && reviews.length
        section#user-reviews
          h3 User Reviews
          each review in reviews
            p= review.comment

      if posts && posts.length
        section#user-posts
          h3 User Posts
          each post in posts
            p= post.content

      if swaps && swaps.length
        section#user-swaps
          h3 User Swaps
          each swap in swaps
            p Swap with User ID #{swap.other_user_id}
